<!DOCTYPE html>
{% load staticfiles %}
<html lang="en" ng-app="TestApp">
    <head>  
        <title>Search Results</title>

        <link   rel="stylesheet" 
                href="{% static "bower_components/bootstrap/dist/css/bootstrap.min.css" %}">

        <script src="{% static "bower_components/jquery/dist/jquery.min.js" %}"></script>
        <script src="{% static "bower_components/bootstrap/dist/js/bootstrap.min.js" %}"></script>
        <script src="{% static "bower_components/bootstrap-datepicker-1.5.0-dist/js/bootstrap-datepicker.js" %}"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js" 
                integrity="sha512-K1qjQ+NcF2TYO/eI3M6v8EiNYZfA95pQumfvcVrTHtwQVDG+aHRqLi/ETn2uB+1JqwYqVG3LIvdm9lj6imS/pQ==" 
                crossorigin="anonymous"></script>

        <style type="text/css">
            html, body {
                width:100%;
                height:100%;
            }

            body {
                padding-top:52px;
            }

            .container {
                display:block;
                margin-top:-20px;
                padding-top:20px;
                height:90%;
            }

            /* Profile container */
            .profile {
                display:block;
                margin:20px 0;
                height:80%;
            }

            /* Profile sidebar */
            .profile-sidebar {
                padding: 20px 0 10px 0;
                background: #fff;
            }

            .profile-userpic img {
                float: none;
                margin: 0 auto;
                width: 50%;
                height: 50%;
                -webkit-border-radius: 50% !important;
                -moz-border-radius: 50% !important;
                border-radius: 50% !important;
            }

            .profile-usertitle {
              text-align: center;
              margin-top: 20px;
            }

            .profile-usertitle-name {
                color: #5a7391;
                font-size: 16px;
                font-weight: 600;
                margin-bottom: 7px;
            }

            .profile-usertitle-job {
                text-transform: uppercase;
                color: #5b9bd1;
                font-size: 12px;
                font-weight: 600;
                margin-bottom: 15px;
            }
                
            .profile-usermenu {
                margin-top: 30px;
            }

            .profile-usermenu ul li {
                border-bottom: 1px solid #f0f4f7;
            }

            .profile-usermenu ul li:last-child {
                border-bottom: none;
            }

            .profile-usermenu ul li a {
                color: #93a3b5;
                font-size: 14px;
                font-weight: 400;
            }

            .profile-usermenu ul li a i {
                margin-right: 8px;
                font-size: 14px;
            }

            .profile-usermenu ul li a:hover {
                background-color: #fafcfd;
                color: #5b9bd1;
            }

            .profile-usermenu ul li.active {
                border-bottom: none;
            }

            .profile-usermenu ul li.active a {
                color: #5b9bd1;
                background-color: #f6f9fb;
                border-left: 2px solid #5b9bd1;
                margin-left: -2px;
            }

            #messagesContainer {
                display:block;
                height:100%;
            }

            #messagesDiv {
                display:block;
                height:100%;
                overflow-y:auto;
            }

            .nav-tabs .glyphicon:not(.no-margin) { 
                margin-right:10px; 
            }

            .tab-pane .list-group {
                margin-bottom:0px;
            }

            .tab-pane .list-group .glyphicon { 
                margin-right:5px; 
            }

            .tab-pane .list-group .glyphicon:hover { 
                color:#FFBC00; 
            }

            a.list-group-item.read { 
                color: #222;background-color: #F3F3F3; 
            }

            .ontop {
                z-index:999;
                width:100%;
                height:100%;
                top:0;
                left:0;
                display:none;
                position:fixed;
                background-color:rgba(40,40,40,.5);
                color:#000000;
            }

            .popup {
                width:600px;
                height:350px;
                position:absolute;
                color:#000000;
                background-color:#4da5ff;
                /* To align popup window at the center of screen*/
                top:50%;
                left:45%;
                margin-top:-200px;
                margin-left:-250px;
            }

            #popUpHeader {
                text-align:left;
                padding-left:15px;
            }

            #popUpHeader span {
                display:inline-block;
                color:white;
                width:100%;
                font-size:20px;
                font-weight:bold;
                margin-top:8px;
            }

            #popUpMainContainer {
                position:absolute;
                top:40px;
                bottom:0;
                left:0px;
                right:0px;
                background-color:white;
            }

            #replyForm {
                position:absolute;
                display:inline-block;
                text-align:right;
                top:0;
                left:0;
                right:0;
                bottom:0;
                padding-right:25px;
                padding-top:22px;
            }

            .fieldContainers {
                display:inline-block;
                width:100%;
                height:auto;
                margin-top:5px;
                margin-bottom:5px;
            }

            .inputLabels {
                display:inline-block;
                padding-top:7px;
            }

            #owner {
                display:inline-block;
                font-weight:bold;
                width:450px;
                height:35px;
                float:right;
                margin-left:10px;
                padding-left:10px;
                border-style:solid;
                border-width:1px;
                border-color:lightblue;
                border-radius:3px;
            }

            #subject {
                display:inline-block;
                width:450px;
                height:35px;
                float:right;
                margin-left:10px;
                padding-left:10px;
                border-style:solid;
                border-width:1px;
                border-color:lightblue;
                border-radius:3px;
            }

            #replyMessage {
                display:inline-block;
                width:450px;
                height:120px;
                float:right;
                margin-left:10px;
                margin-bottom:12px;
                padding-left:10px;
                padding-top:5px;
                border-style:solid;
                border-width:1px;
                border-color:lightblue;
            }

            #replyButton {
                background-color:#4da5ff;
                color:white;
                width:120px;
                height:40px;
                margin-left:8px;
                border-style:solid;
                border-width:1px;
                border-color:#4da5ff;
                border-radius:5px;
            }

            #popupCancel {
                width:120px;
                height:40px;
                margin-right:8px;
                border-style:solid;
                border-width:1px;
                border-color:lightgrey;
                border-radius:5px;
            }

            /* BEGIN RESERVATIONS CONTAINER */

            #reservationsContainer {
                display:none;
            }

            td span {
                display:inline-block;
                margin-top:10px;
            }

            .reservationsHeaderCell {
                text-align:center;
                font-weight:bold;
            }

            .ownerCell {
                text-align:center;
                color:#4da5ff;
            }

            .stayCell {
                text-align:center;
            }

            .statusCell {
                text-align:center;
            }

            .cancelCell {
                text-align:center;
            }

            td.cancelCell button {
                display:inline-block;
                width:120px;
                height:40px;
                margin-top:1px;
                border-style:solid;
                border-width:1px;
                border-color:lightgrey;
                border-radius:5px;
            }

            /* END RESERVATIONS CONTAINER */

            /* BEGIN REQUESTS CONTAINER */

            #requestsContainer {
                display:none;
            }

            .requestsHeaderCell {
                text-align:center;
                font-weight:bold;
            }

            .userCell {
                text-align:center;
                color:#4da5ff;
            }

            .spotCell {
                text-align:center;
            }

            .dateCell {
                text-align:center;
            }

            /* END REQUESTS CONTAINER */

            /* BEGIN PARKING SPOTS CONTAINER */

            #parkingSpotsContainer {
                display:none;
            }

            #parkingContainer {
                text-align:center;
                margin-top:30px;
                width:100%;
            }

            .parkingSpots {
                display:inline-block;
                width:42%; 
                margin-bottom:30px;
                margin-right:15px;
                margin-left:15px;
                border-style:solid;
                border-color:grey;
                border-width:1px;
                -webkit-box-shadow: 0 8px 6px -7px grey;
                -moz-box-shadow: 0 8px 6px -7px grey;
                box-shadow: 0 8px 6px -7px grey;
            }

            .parkingImageContainer, .parkingImage {
                display:inline-block; 
                width:100%; 
                height:175px; 
                float:left;
                border-style:solid;
                border-color:lightgrey;
                border-width:0px;
                border-bottom-width:1px;
            }

            .streetAddress {
                float:left;
                clear:right;
                padding-left:10px;
                text-decoration:underline;
            }

            .popUpLink:visited  {color:black; text-decoration:none; background-color:none;}
            .popUpLink:link     {color:black; text-decoration:none; background-color:none;}
            .popUpLink:hover    {color:blue; text-decoration:none; background-color:none;}
            .popUpLink:active   {color:red; text-decoration:underline; background-color:none;}

            .reviewRating {
                float:left;
                clear:left;
                padding-left:10px;
            }

            .editButtonContainer {
                float:left;
                clear:left;
                padding-left:10px;
                font-style:italic;
                padding-bottom:10px;
            }

            span.stars, span.stars span {
                display: inline-block;
                background: url({% static "media/stars.png" %}) 0 -16px repeat-x;
                width: 80px;
                height: 16px;
                text-align:left;
            }

            span.stars span {
                max-width:80px;
                background-position: 0 0;
            }

            .editButton {
                background-color:#4da5ff;
                color:white;
                width:100px;
                height:40px;
                border-style:solid;
                border-width:1px;
                border-color:#4da5ff;
                border-radius:5px;
            }

            /* END PARKING SPOTS CONTAINER */

            /* BEGIN RESERVATION HISTORY CONTAINER */

            #reservationHistoryContainer {
                display:none;
            }

            .resHistoryHeaderCell {
                text-align:center;
                font-weight:bold;
            }

            .historyOwnerCell {
                text-align:center;
                color:#4da5ff;
            }

            .historyStayCell {
                text-align:center;
            }

            .reviewCell {
                text-align:center;
            }

            td.reviewCell button {
                display:inline-block;
                width:120px;
                height:40px;
                margin-top:1px;
                border-style:solid;
                border-width:1px;
                border-color:lightgrey;
                border-radius:5px;
            }

            /* END RESERVATION HISTORY CONTAINER */
        </style>
    </head>

    <body>
        {% include "header.html" %}

        <div class="container">
            {% if message %}
                <div class="row">
                    <div class="col-md-12">
                        <div id="error2" style="display:none" class="alert alert-danger" role="alert"></div>
                        {% if message_type %}
                            <div id="success1" style="display:flex"  class="alert alert-success" role="alert">{{ message }}</div>
                        {%else %}
                            <div id="error1" style="display:flex" class="alert alert-danger" role="alert">{{ message }}</div>
                        {% endif %}
                    </div>
                </div>
            {%endif%}

            <div class="row profile">
                <div class="col-md-3">
                    <div class="profile-sidebar">
                        <!-- BEGIN SIDEBAR USERPIC -->
                        <div class="profile-userpic">
                            <img  src="http://keenthemes.com/preview/metronic/theme/assets/admin/pages/media/profile/profile_user.jpg" 
                                  class="img-responsive" 
                                  alt="Profile Picture">
                        </div>
                        <!-- END SIDEBAR USERPIC -->

                        <!-- BEGIN SIDEBAR USER TITLE -->
                        <div class="profile-usertitle">
                            <div class="profile-usertitle-name">
                                {{ user.username }}
                            </div>

                            <div class="profile-usertitle-job">
                                <!-- normal users or admin-->
                                {% if user.extendeduser.adminuser.registered%}
                                    ADMIN
                                {% else %}
                                    COMMON USER
                                {% endif %}
                            </div>
                        </div>
                        <!-- END SIDEBAR USER TITLE -->

                        <!-- BEGIN SIDEBAR MENU -->
                        <div class="profile-usermenu">
                            <ul class="nav">
                                <li class="active" id="messagesTab" >
                                    <a href="#" onclick="showMessages()"><i class="glyphicon glyphicon-envelope"></i>Messages </a>
                                </li>

                                <li class="" id="pendingResTab">
                                    <a href="#" onclick="showPendingReservations()"><i class="glyphicon glyphicon-list-alt"></i>Pending Reservations </a>
                                </li>

                                {% if user.extendeduser.adminuser.registered %}
                                    <li class="" id="pendingReqTab">
                                        <!-- normal users or admin-->
                                        {% if user.extendeduser.adminuser.registered%}
                                             <a href="#" onclick="showPendingRequests()"><i class="glyphicon glyphicon-flag"></i>Pending Requests</a>
                                        {% else %}
                                            
                                        {% endif %}
                                    </li>
                                {% endif %}

                                {% if user.extendeduser.adminuser.registered %}
                                    <li class="" id="parkingSpotsTab">
                                        <!-- normal users or admin-->
                                        {% if user.extendeduser.adminuser.registered%}
                                             <a href="#" onclick="showParkingSpots()"><i class="glyphicon glyphicon-th-large"></i>Parking Spots </a>
                                        {% else %}
                                            
                                        {% endif %}
                                    </li>
                                {% endif %}

                                <li class="" id="resHistoryTab">
                                    <a href="#" onclick="showReservationHistory()"><i class="glyphicon glyphicon-book"></i>Reservation History </a>
                                </li>

                                <li class="" id="accountSettingsTab">
                                    <a href="../accounts/password/change" onclick="showAccountSettings()"><i class="glyphicon glyphicon-user"></i>Account Settings</a>
                                </li>
                            </ul>
                        </div>
                        <!-- END SIDEBAR MENU -->
                    </div>
                </div>

                <!-- BEGIN MESSAGES TAB -->
                <div class="col-md-9" id="messagesContainer">
                    <ul class="nav nav-tabs" id="myTab" style="margin-bottom:-1px;">
                        <li class="active"><a href="#message" data-toggle="tab"><b>Your Messages</b></a></li>
                    </ul>

                    <div class="tab-content" id="messagesDiv">
                        <div class="tab-pane fade in active" id="message">
                            {% if messages %}
                                {% for x in messages %}
                                <div class="list-group" onClick="pop('popDiv{{x.id}}')">
                                        <a href="#" class="list-group-item">
                                            <span class="name" style="min-width:120px; display:inline-block;">
                                                <b style="color:#4da5ff;">{{x.sender}}</b>
                                            </span> 

                                            <span class="">
                                                {{x.subject}}
                                            </span>

                                            <span class="badge">
                                                {{x.date}}
                                            </span>

                                            <br />

                                            <span  id="messageSpan" class="text-muted" style="font-size: 11px;">
                                                {{x.message}}
                                            </span>  
                                        </a>
                                    </div>

                                    <div id="popDiv{{x.id}}" class="ontop">
                                        <div class="popup">
                                            <div id="popUpHeader">
                                                <span>Reply Owner</span>
                                            </div>

                                            <div id="popUpMainContainer">
                                                <form id="replyForm" action="../reply/" method="post">
                                                    <input type="hidden" name="pid" value={{x.sender.id}}>
                                                    <div class="fieldContainers">
                                                        <label  class="inputLabels"
                                                                for="owner">To: </label>
                                                        <input  id="owner"
                                                                type="text"
                                                                name="owner"
                                                                value="{{ x.sender }}">
                                                    </div>
                                                    <br/>
                                                    <div class="fieldContainers">
                                                        <label  class="inputLabels"
                                                                for="subject">Subject: </label>
                                                        <input  type="text" 
                                                                name="subject"
                                                                id="subject"
                                                                class="subject"
                                                                value="RE: {{ x.subject }}">
                                                    </div>
                                                    <br/>
                                                    <div class="fieldContainers">
                                                        <label  class="inputLabels"
                                                                for="message">Message: </label>
                                                        <textarea   id="replyMessage"
                                                                    name="message"
                                                                    maxlength="3000">&#13;&#10;&#13;&#10;&#13;&#10;-------------------------------------------------&#13;&#10;{{x.message}}</textarea>
                                                    </div>
                                                    <br />
                                                    <button id="popupCancel" 
                                                            type="button"
                                                            onClick="hide('popDiv{{x.id}}')">Cancel</button>

                                                    <input  id="replyButton" 
                                                            type="submit"
                                                            value="Send Reply">
                                                    {% csrf_token%}
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                {% endfor %}
                            {% else %}
                                  <h3>You have no messages</h3>
                            {% endif %}
                        </div>  
                    </div>
                </div>
                <!-- END MESSAGES TAB -->

                <!-- BEGIN RESERVATIONS TAB -->
                <div class="col-md-9" id="reservationsContainer">
                    <ul class="nav nav-tabs" id="myTab" style="margin-bottom:-1px;">
                        <li class="active"><a href="#" data-toggle="tab"><b>Your Pending Reservations</b></a></li>
                    </ul>

                    <table class="table">
                        {% if outgoing_requests %}
                            <form method="post" action='../cancel_reservation/' enctype="multipart/form-data" >
                                {%csrf_token%}
                                <tr>
                                    <td class="reservationsHeaderCell">Owner</td>
                                    <td class="reservationsHeaderCell">Stay</td>
                                    <td class="reservationsHeaderCell">Status</td>
                                    <td class="reservationsHeaderCell">Cancel Reservation</td>
                                </tr>

                                {% for res in outgoing_requests %}
                                    {% if res.has_responded and not res.is_approved%}
                                        <tr>
                                            <td class="ownerCell">
                                                <span>{{res.message.receiver}}</span>
                                            </td>

                                            <td class="stayCell">
                                                <i>{{res.res_date}}</i>
                                                <br />
                                                {{res.parkingspot.street_address}}
                                            </td>

                                            <td class="statusCell" bgcolor = "#f3bebe">
                                                <span>Denied</span>
                                            </td>
                                    {% elif res.has_responded and res.is_approved%}
                                        <tr>
                                            <td class="ownerCell">
                                                <span>{{res.message.receiver}}</span>
                                            </td>

                                            <td class="stayCell">
                                                <i>{{res.res_date}}</i>
                                                <br />
                                                {{res.parkingspot.street_address}}
                                            </td>

                                            <td class="statusCell" bgcolor = "#b4fdb4">
                                                <span>Approved</span>
                                            </td>
                                    {% else %}
                                        <tr>
                                            <td class="ownerCell">
                                                <span>{{res.message.receiver}}</span>
                                            </td>

                                            <td class="stayCell">
                                                <i>{{res.res_date}}</i>
                                                <br />
                                                {{res.parkingspot.street_address}}
                                            </td>

                                            <td class="statusCell" bgcolor ="#ffecb3">
                                                <span>Pending</span>
                                            </td>
                                    {% endif %}

                                    {% if not res.has_responded %}
                                        <td class="cancelCell">
                                            <button name="cancel" 
                                                    type="submit" 
                                                    id="cancel" 
                                                    value="{{res.id}}">Cancel</button>
                                        </td>
                                    {%else%}
                                        <td class="cancelCell">
                                            <span>Email Seller Directly</span>
                                        </td>
                                    {% endif %}

                                    </tr>
                                {% endfor %}
                            </form>
                        {% else %}
                            <tr>
                                <td><center>No Reservations Requested</center></td>
                            </tr>
                        {% endif%}
                    </table>
                </div>
                <!-- END RESERVATIONS TAB -->

                <!-- BEGIN REQUESTS TAB -->
                {% if user.extendeduser.adminuser.registered %}
                    <div class="col-md-9" id="requestsContainer">
                        <ul class="nav nav-tabs" id="myTab" style="margin-bottom:-1px;">
                            <li class="active"><a href="#" data-toggle="tab"><b>Your Pending Requests</b></a></li>
                        </ul>

                        <table class="table">
                            {% if incoming_requests %}
                                <tr>
                                    <td class="requestsHeaderCell">User</td>
                                    <td class="requestsHeaderCell">Requested Spot</td>
                                    <td class="requestsHeaderCell">Requested Date</td>
                                    <td class="requestsHeaderCell">Approve/Deny</td>
                                </tr>

                                <form method="post" action='../request_response/' enctype="multipart/form-data" >
                                    {%csrf_token%}
                                    {% for res in incoming_requests %}
                                        <tr>
                                            <td class="userCell">{{res.message.sender}}</td>
                                            <td class="spotCell">{{res.parkingspot.street_address}}</td>
                                            <td class="dateCell"><i>{{res.res_date}}</i></td>
                                            <td class="">
                                                <button name="confirm" 
                                                        type="submit" 
                                                        id="confirm" 
                                                        value="{{res.id}}" 
                                                        class="btn btn-primary btn-large">Approve</button>
                                                <button name="deny" 
                                                        type="submit" 
                                                        id="deny" 
                                                        value="{{res.id}}" 
                                                        class="btn btn-primary btn-large">Decline</button>
                                            </td>
                                        </tr>
                                    {% endfor %}
                                </form>
                            {% else %}
                                <tr>
                                    <td><center>No Pending Requests</center></td>
                                </tr>
                            {% endif %}
                        </table>
                    </div>
                {% endif %}
                <!-- END REQUESTS TAB -->

                <!-- BEGIN PARKING SPOTS TAB -->
                {% if user.extendeduser.adminuser.registered %}
                    <div class="col-md-9" id="parkingSpotsContainer">
                        <ul class="nav nav-tabs" id="myTab">
                            <li class="active"><a href="#" data-toggle="tab"><b>Your Parking Spots</b></a></li>
                        </ul>

                        <div id="parkingContainer">
                            {% if parkingspots %}
                                {% for x in parkingspots %}
                                    <div class="parkingSpots">
                                        <p class="parkingImageContainer">
                                            <img class="parkingImage" src="{{x.photos.url}}" alt="Parking Image">
                                        </p>
                                        <a class="popUpLink" href="#" onClick="pop('popDiv')">
                                            <p class="streetAddress">{{ x.street_address }}, {{ x.city }}, {{ x.state }}</p>
                                        </a>
                                        <p class="reviewRating"><b>Rating:&nbsp
                                            <span class="stars">{{x.get_avg_rating}}</span></b>
                                        </p>

                                        <form method="get"  onsubmit="" action='../editspot/' enctype="multipart/form-data">
                                            <div class="editButtonContainer">
                                                <button name="edit" 
                                                        type="submit" 
                                                        class="editButton" 
                                                        value="{{ x.id }}">Edit</button>
                                            </div>
                                            {% csrf_token %}
                                        </form>

                                        <div id="popDiv" class="ontop">
                                            <div class="popup">
                                                <h4> {{x.street_address}}</h4>
                                                <img class="parkingImage" src="{{x.photos.url}}" alt="Parking Image">
                                                <p><b>Cost:</b></p>
                                                <p>{{x.cost}}</p>
                                                <p><b>Amenities:</b></p><p>
                                                    {% for key, value in x.amenities.items %}
                                                        {% if value %}
                                                            {{key}}
                                                        {% endif %}
                                                    {% endfor %}
                                                </p>
                                                <p><b>Description:</b></p>
                                                <p>{{x.description}}</p>
                                                <p><a href="#" onClick="hide('popDiv')">Close</a></p>
                                            </div>
                                        </div>
                                    </div>
                                {% endfor %}
                            {% endif %}
                        </div>
                    </div>
                {% endif %}
                <!-- END PARKING SPOTS TAB -->

                <!-- BEGIN RESERVATION HISTORY TAB -->
                <div class="col-md-9" id="reservationHistoryContainer">
                    <ul class="nav nav-tabs" id="myTab" style="margin-bottom:-1px;">
                        <li class="active"><a href="#" data-toggle="tab"><b>Your Reservation History</b></a></li>
                    </ul>

                    <table class="table">
                        {%if history%}
                                <form method="post" action='../review/' enctype="multipart/form-data" >
                                    {%csrf_token%}
                                
                                    <tr>
                                        <td class="resHistoryHeaderCell">Seller</td>
                                        <td class="resHistoryHeaderCell">Requested Spot</td>
                                        <td class="resHistoryHeaderCell">Requested Date</td>
                                        <td class="resHistoryHeaderCell">Review</td>
                                    </tr>

                                    {% for res in history%}
                                        <tr>
                                            <td class="historyOwnerCell">{{res.message.receiver}}</td>

                                            <td class="historyStayCell">
                                                <i>{{res.res_date}}</i>
                                                <br />
                                                {{res.parkingspot.street_address}}
                                            </td>

                                            {% if not res.reviewed%}
                                                <td class="reviewCell">
                                                    <button name="review" 
                                                            type="submit" 
                                                            id="review" 
                                                            value="{{res.id}}">Write Review</button>
                                                </td>
                                            {% else%}
                                                <td class="reviewCell">Already Reviewed</td>
                                            {% endif %}
                                        </tr>
                                    {% endfor %}
                                </form>
                            {%else%}
                                <tr>
                                    <td><center>No Reservation History</center></td>
                                </tr>
                            {%endif%}
                    </table>
                </div>
                <!-- END RESERVATION HISTORY TAB -->

                <!-- BEGIN ACCOUNT SETTINGS TAB -->

                <!-- END ACCOUNT SETTINGS TAB -->
            </div>
        </div>

        <script>
            //Function To Display Popup
            function pop(div) {
                document.getElementById(div).style.display = 'block';
            }

            //Function to close popup
            function hide(div) {
                document.getElementById(div).style.display = 'none';
            }

            //To detect escape button
            document.onkeydown = function(evt) {
                evt = evt || window.event;
                if (evt.keyCode == 27) {
                    hide('popDiv');
                }
            };

            function showMessages() {
                // Change Active Displays
                document.getElementById('messagesContainer').style.display = 'block';
                document.getElementById('reservationsContainer').style.display = 'none';
                document.getElementById('requestsContainer').style.display = 'none';
                document.getElementById('parkingSpotsContainer').style.display = 'none';
                document.getElementById('reservationHistoryContainer').style.display = 'none';

                // Change Active Tabs
                document.getElementById('messagesTab').className = 'active';
                document.getElementById('pendingResTab').className = '';
                document.getElementById('pendingReqTab').className = '';
                document.getElementById('parkingSpotsTab').className = '';
                document.getElementById('resHistoryTab').className = '';
                document.getElementById('accountSettingsTab').className = '';
            }

            function showPendingReservations() {
                // Change Active Displays
                document.getElementById('messagesContainer').style.display = 'none';
                document.getElementById('reservationsContainer').style.display = 'block';
                document.getElementById('requestsContainer').style.display = 'none';
                document.getElementById('parkingSpotsContainer').style.display = 'none';
                document.getElementById('reservationHistoryContainer').style.display = 'none';

                // Change Active Tabs
                document.getElementById('messagesTab').className = '';
                document.getElementById('pendingResTab').className = 'active';
                document.getElementById('pendingReqTab').className = '';
                document.getElementById('parkingSpotsTab').className = '';
                document.getElementById('resHistoryTab').className = '';
                document.getElementById('accountSettingsTab').className = '';
            }

            function showPendingRequests() {
                // Change Active Displays
                document.getElementById('messagesContainer').style.display = 'none';
                document.getElementById('reservationsContainer').style.display = 'none';
                document.getElementById('requestsContainer').style.display = 'block';
                document.getElementById('parkingSpotsContainer').style.display = 'none';
                document.getElementById('reservationHistoryContainer').style.display = 'none';

                // Change Active Tabs
                document.getElementById('messagesTab').className = '';
                document.getElementById('pendingResTab').className = '';
                document.getElementById('pendingReqTab').className = 'active';
                document.getElementById('parkingSpotsTab').className = '';
                document.getElementById('resHistoryTab').className = '';
                document.getElementById('accountSettingsTab').className = '';
            }

            function showParkingSpots() {
                // Change Active Displays
                document.getElementById('messagesContainer').style.display = 'none';
                document.getElementById('reservationsContainer').style.display = 'none';
                document.getElementById('requestsContainer').style.display = 'none';
                document.getElementById('parkingSpotsContainer').style.display = 'block';
                document.getElementById('reservationHistoryContainer').style.display = 'none';

                // Change Active Tabs
                document.getElementById('messagesTab').className = '';
                document.getElementById('pendingResTab').className = '';
                document.getElementById('pendingReqTab').className = '';
                document.getElementById('parkingSpotsTab').className = 'active';
                document.getElementById('resHistoryTab').className = '';
                document.getElementById('accountSettingsTab').className = '';
            }

            function showReservationHistory() {
                // Change Active Displays
                document.getElementById('messagesContainer').style.display = 'none';
                document.getElementById('reservationsContainer').style.display = 'none';
                document.getElementById('requestsContainer').style.display = 'none';
                document.getElementById('parkingSpotsContainer').style.display = 'none';
                document.getElementById('reservationHistoryContainer').style.display = 'block';

                // Change Active Tabs
                document.getElementById('messagesTab').className = '';
                document.getElementById('pendingResTab').className = '';
                document.getElementById('pendingReqTab').className = '';
                document.getElementById('parkingSpotsTab').className = '';
                document.getElementById('resHistoryTab').className = 'active';
                document.getElementById('accountSettingsTab').className = '';
            }

            function showAccountSettings() {
                // Change Active Displays
                document.getElementById('messagesContainer').style.display = 'none';
                document.getElementById('reservationsContainer').style.display = 'none';
                document.getElementById('requestsContainer').style.display = 'none';
                document.getElementById('parkingSpotsContainer').style.display = 'none';
                document.getElementById('reservationHistoryContainer').style.display = 'none';

                // Change Active Tabs
                document.getElementById('messagesTab').className = '';
                document.getElementById('pendingResTab').className = '';
                document.getElementById('pendingReqTab').className = '';
                document.getElementById('parkingSpotsTab').className = '';
                document.getElementById('resHistoryTab').className = '';
                document.getElementById('accountSettingsTab').className = 'active';
            }
        </script>

        <script>
            $('.stars').each(function() {
                    $(this).html($('<span/>').width(Math.max(0, (Math.min(5, parseFloat($(this).html())))) * 16));
            });
        </script>    
    </body>
</html> 

